<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ãƒãƒƒãƒ—</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <link rel="stylesheet" href="css/style.css" />
  <style>
    :root{
      --accent:#005ABB;
    }
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#fff;color:#111}
    .container{max-width:960px;margin:0 auto;padding:12px}
    .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    .btn{appearance:none;border:0;border-radius:12px;padding:12px 16px;font-weight:800;background:var(--accent);color:#fff;cursor:pointer}
    .btn-secondary{background:#e9eef6;color:#111}
    .link{color:var(--accent);text-decoration:none;font-weight:700}

    .legend{margin:10px 0 14px;padding:10px 12px;font-size:14px;background:#f6f7fb;border-radius:10px;color:#333}

    /* ====== åœ°å›³ ====== */
    .map-wrap{
      position:relative;
      width:100%;
      max-width:920px;
      margin:0 auto 14px;
      background:#fff;
      border-radius:16px;
      box-shadow:0 10px 30px rgba(0,0,0,.05);
      overflow:hidden;
    }
    .map-img{
      display:block;
      width:100%;
      height:auto;
      object-fit:contain;
      background:#fff;
    }
    .pin{
      position:absolute;
      width:40px; height:40px;
      transform:translate(-50%,-100%); /* å…ˆç«¯ãŒæŒ‡ã™ã‚ˆã†ã«ä¸Šã«åˆã‚ã›ã‚‹ */
      display:inline-block;
    }
    .pin img{width:100%; height:100%; display:block}
    .pin:focus-visible{outline:3px solid rgba(0,90,187,.35); border-radius:50%}

    /* ====== ã‚¹ã‚¿ãƒ³ãƒ—å¸³ï¼ˆæŠ˜ã‚ŠãŸãŸã¿ï¼‰ ====== */
    .stampbook{
      margin:0 auto 18px;
      background:#fff;border:1px solid #e9eef6;border-radius:14px;
      box-shadow:0 8px 24px rgba(0,0,0,.05);
      overflow:hidden;
      max-width:920px;
    }
    .stampbook-header{
      width:100%; text-align:left; background:#fff; color:#111;
      appearance:none;border:0; padding:14px 16px; font-weight:900; letter-spacing:.02em;
      display:flex;align-items:center;justify-content:space-between; cursor:pointer;
    }
    .stampbook-header .arrow{margin-right:2px;color:#333}
    .stampbook-body{display:none;padding:12px 12px 16px;background:#fff}
    .stamp-grid{
      display:grid; grid-template-columns: repeat(3, 1fr); gap:10px;
    }
    .stamp-cell{
      border:1px solid #e3eaf6;border-radius:12px;padding:10px;min-height:72px;
      background:#fff;display:flex;align-items:center;gap:10px
    }
    .stamp-thumb{width:56px;height:56px;border-radius:10px;background:#eef5ff;flex:none;overflow:hidden;display:flex;align-items:center;justify-content:center}
    .stamp-thumb img{width:100%;height:100%;object-fit:cover}
    .stamp-meta{flex:1}
    .stamp-name{font-weight:800}
    .stamp-status{font-size:12px;color:#333}
    .stamp-cell.is-got{background: #f3fbf5; border-color:#b7e4c7}
    .stamp-cell.is-got .stamp-status{color:#2b8a3e; font-weight:800}
    .mark{font-weight:700}

    /* ====== ã‚«ãƒ¡ãƒ©å¹ãå‡ºã—ï¼ˆæ—¢å­˜ï¼‰ ====== */
    .camera-chooser-overlay{
      position:fixed;inset:0;background:rgba(0,0,0,.55);backdrop-filter:blur(2px);
      z-index:998;display:block;
    }
    .camera-chooser{
      position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);
      width:min(92vw,560px);max-height:75vh;overflow:auto;background:#fff;border-radius:16px;
      box-shadow:0 18px 48px rgba(0,0,0,.3);padding:16px;z-index:999;
    }
    .camera-chooser[hidden], .camera-chooser-overlay[hidden]{display:none}
    .camera-chooser h3{margin:0 0 10px;font-size:18px}
    .camera-chooser .list{display:grid;grid-template-columns:1fr;gap:8px}
    .camera-chooser .item{display:flex;gap:10px;align-items:center;border:1px solid #e3eaf6;border-radius:12px;padding:10px}
    .camera-chooser .thumb{width:56px;height:56px;border-radius:10px;background:#eef5ff;flex:none;overflow:hidden}
    .camera-chooser .thumb img{width:100%;height:100%;object-fit:cover}
    .camera-chooser .meta{flex:1}
    .camera-chooser .meta .name{font-weight:800}
    .camera-chooser .meta .type{font-size:12px;color:#333}
    .camera-chooser .go{white-space:nowrap}

    /* ====== å®Œèµ°ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆæ—¢å­˜ï¼šcomplete.htmlç›¸å½“ï¼‰ ====== */
    .complete-overlay{
      position:fixed;inset:0;background:rgba(0,0,0,.6);backdrop-filter:blur(2px);
      z-index:1000;display:none;
    }
    .complete-overlay.is-open{display:block}
    .complete-modal{
      position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);
      width:min(92vw,560px);max-height:80vh;overflow:auto;background:#fff;border-radius:18px;
      box-shadow:0 20px 60px rgba(0,0,0,.35);padding:20px;z-index:1001;display:none;
    }
    .complete-modal.is-open{display:block}
    .complete-title{margin:0 0 6px;font-size:20px}
    .complete-lead{margin:0 0 14px}
    .complete-row{display:flex;gap:8px;flex-wrap:wrap}
    .complete-row .btn{flex:1;min-width:160px}
    .dim-when-modal{transition:opacity .2s ease}
    .dim-when-modal.is-dim{opacity:.15;pointer-events:none}

    footer{margin:16px auto 24px;max-width:960px;color:#333}
    footer a{color:var(--accent);text-decoration:none;font-weight:700}
  </style>
</head>
<body>
  <div id="pageRoot" class="dim-when-modal">
    <div class="container">
      <header class="row">
        <button id="cameraBtn" class="btn">ã‚«ãƒ¡ãƒ©èµ·å‹•</button>
        <a class="btn btn-secondary" href="tutorial.html">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</a>
      </header>

      <div class="legend">
        ãƒãƒƒãƒ—ã‹ã‚‰ã‚¹ãƒãƒƒãƒˆã‚’é¸ã³ã€ARã§ã‚¹ã‚¿ãƒ³ãƒ—ã‚’é›†ã‚ã¾ã—ã‚‡ã†ï¼ˆå…¨6ç®‡æ‰€ï¼šAR 1ã€œ3ã€éAR 4ã€œ6ï¼‰ã€‚
      </div>

      <!-- ====== ä¸­å¤®ã®åœ°å›³è¡¨ç¤ºï¼ˆç”»åƒï¼‰ ====== -->
      <div class="map-wrap" aria-label="ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹ãƒãƒƒãƒ—">
        <img class="map-img" src="assets/images/campasMap.png" alt="ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹åœ°å›³" />

        <!-- â˜… åœ°å›³ã‚¢ãƒ—ãƒªã¸ã®ãƒªãƒ³ã‚¯ã¯å¾Œã§åŸ‹ã‚è¾¼ã¿äºˆå®šï¼šhref ã¯ç©ºã§OK -->
        <!-- åº§æ¨™ã¯%ã§ä»®é…ç½®ã€‚å¾Œã§å¾®èª¿æ•´ã—ã¦ãã ã•ã„ã€‚ -->
        <a href="" class="pin" data-spot="spot1" style="left:22%;top:38%;" aria-label="ã‚¹ãƒãƒƒãƒˆ1">
          <img src="assets/images/map_pin.png" alt="ã‚¹ãƒãƒƒãƒˆ1ãƒ”ãƒ³" />
        </a>
        <a href="" class="pin" data-spot="spot2" style="left:48%;top:28%;" aria-label="ã‚¹ãƒãƒƒãƒˆ2">
          <img src="assets/images/map_pin.png" alt="ã‚¹ãƒãƒƒãƒˆ2ãƒ”ãƒ³" />
        </a>
        <a href="" class="pin" data-spot="spot3" style="left:72%;top:46%;" aria-label="ã‚¹ãƒãƒƒãƒˆ3">
          <img src="assets/images/map_pin.png" alt="ã‚¹ãƒãƒƒãƒˆ3ãƒ”ãƒ³" />
        </a>
        <a href="" class="pin" data-spot="spot4" style="left:30%;top:62%;" aria-label="ã‚¹ãƒãƒƒãƒˆ4">
          <img src="assets/images/map_pin.png" alt="ã‚¹ãƒãƒƒãƒˆ4ãƒ”ãƒ³" />
        </a>
        <a href="" class="pin" data-spot="spot5" style="left:55%;top:68%;" aria-label="ã‚¹ãƒãƒƒãƒˆ5">
          <img src="assets/images/map_pin.png" alt="ã‚¹ãƒãƒƒãƒˆ5ãƒ”ãƒ³" />
        </a>
        <a href="" class="pin" data-spot="spot6" style="left:80%;top:60%;" aria-label="ã‚¹ãƒãƒƒãƒˆ6">
          <img src="assets/images/map_pin.png" alt="ã‚¹ãƒãƒƒãƒˆ6ãƒ”ãƒ³" />
        </a>
      </div>

      <!-- ====== ã‚¹ã‚¿ãƒ³ãƒ—å¸³ï¼ˆæŠ˜ã‚ŠãŸãŸã¿ï¼‰ ====== -->
      <section class="stampbook" aria-label="ã‚¹ã‚¿ãƒ³ãƒ—å¸³">
        <button id="stampToggle" class="stampbook-header" type="button" aria-expanded="false" aria-controls="stampBody">
          <span><span class="arrow">â–¼</span> ã‚¹ã‚¿ãƒ³ãƒ—å¸³</span>
          <span id="stampCount">0/6</span>
        </button>
        <div id="stampBody" class="stampbook-body">
          <div class="stamp-grid">
            <!-- spot1ã€œspot6ï¼šmap.js ãŒ .is-got ã‚’ä»˜ä¸ã—ã€.mark ã«æ–‡è¨€åæ˜  -->
            <div class="stamp-cell" data-spot="spot1">
              <div class="stamp-thumb"><img src="assets/images/stamp01.png" alt="ã‚¹ã‚¿ãƒ³ãƒ—1"></div>
              <div class="stamp-meta">
                <div class="stamp-name">ã‚¹ãƒãƒƒãƒˆ1</div>
                <div class="stamp-status"><span class="mark">æœªå–å¾—</span></div>
              </div>
            </div>
            <div class="stamp-cell" data-spot="spot2">
              <div class="stamp-thumb"><img src="assets/images/stamp02.png" alt="ã‚¹ã‚¿ãƒ³ãƒ—2"></div>
              <div class="stamp-meta">
                <div class="stamp-name">ã‚¹ãƒãƒƒãƒˆ2</div>
                <div class="stamp-status"><span class="mark">æœªå–å¾—</span></div>
              </div>
            </div>
            <div class="stamp-cell" data-spot="spot3">
              <div class="stamp-thumb"><img src="assets/images/stamp03.png" alt="ã‚¹ã‚¿ãƒ³ãƒ—3"></div>
              <div class="stamp-meta">
                <div class="stamp-name">ã‚¹ãƒãƒƒãƒˆ3</div>
                <div class="stamp-status"><span class="mark">æœªå–å¾—</span></div>
              </div>
            </div>
            <div class="stamp-cell" data-spot="spot4">
              <div class="stamp-thumb"><img src="assets/images/stamp01.png" alt="ã‚¹ã‚¿ãƒ³ãƒ—4"></div>
              <div class="stamp-meta">
                <div class="stamp-name">ã‚¹ãƒãƒƒãƒˆ4</div>
                <div class="stamp-status"><span class="mark">æœªå–å¾—</span></div>
              </div>
            </div>
            <div class="stamp-cell" data-spot="spot5">
              <div class="stamp-thumb"><img src="assets/images/stamp02.png" alt="ã‚¹ã‚¿ãƒ³ãƒ—5"></div>
              <div class="stamp-meta">
                <div class="stamp-name">ã‚¹ãƒãƒƒãƒˆ5</div>
                <div class="stamp-status"><span class="mark">æœªå–å¾—</span></div>
              </div>
            </div>
            <div class="stamp-cell" data-spot="spot6">
              <div class="stamp-thumb"><img src="assets/images/stamp03.png" alt="ã‚¹ã‚¿ãƒ³ãƒ—6"></div>
              <div class="stamp-meta">
                <div class="stamp-name">ã‚¹ãƒãƒƒãƒˆ6</div>
                <div class="stamp-status"><span class="mark">æœªå–å¾—</span></div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- å®Œäº†ãƒªãƒ³ã‚¯ï¼ˆä»»æ„ã€å¸¸æ™‚ãƒªãƒ³ã‚¯ï¼‰ -->
      <div id="completeLinkArea" style="margin:6px 0 0;">
        <a class="link" href="complete.html">ğŸ‰ ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆã‚’ç¢ºèªã™ã‚‹</a>
      </div>
    </div>

    <!-- åˆ©ç”¨è¦ç´„ãƒªãƒ³ã‚¯ï¼ˆå¾©æ´»ï¼‰ -->
    <footer>
      <a href="terms.html">åˆ©ç”¨è¦ç´„ãƒ»ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼</a>
    </footer>
  </div>

  <!-- æ—¢å­˜ï¼šã‚¹ãƒãƒƒãƒˆé¸æŠã®å¹ãå‡ºã— -->
  <div id="cameraChooserOverlay" class="camera-chooser-overlay" hidden></div>
  <div id="cameraChooser" class="camera-chooser" hidden role="dialog" aria-modal="true" aria-labelledby="cameraChooserTitle">
    <h3 id="cameraChooserTitle">ã‚¹ãƒãƒƒãƒˆã‚’é¸ã‚“ã§ãã ã•ã„</h3>
    <div id="cameraChooserList" class="list"></div>
    <div class="row" style="margin-top:8px"><button id="cameraChooserClose" class="btn btn-secondary" type="button">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button></div>
  </div>

  <!-- å®Œèµ°ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆcomplete.htmlç›¸å½“ï¼‰ -->
  <div id="completeOverlay" class="complete-overlay" aria-hidden="true"></div>
  <div id="completeModal" class="complete-modal" role="dialog" aria-modal="true" aria-labelledby="completeTitle" aria-describedby="completeLead">
    <h2 id="completeTitle" class="complete-title">ğŸ‰ ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆï¼</h2>
    <p id="completeLead" class="complete-lead">å…¨ã¦ã®ã‚¹ã‚¿ãƒ³ãƒ—ã‚’é›†ã‚ã¾ã—ãŸã€‚ã”å‚åŠ ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼</p>
    <div class="complete-row" style="margin-top:8px">
      <button id="closeComplete" class="btn btn-secondary" type="button">ãƒãƒƒãƒ—ã«æˆ»ã‚‹</button>
      <a id="toSurvey" class="btn" href="post-survey.html">ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã¸ï¼ˆãŠç­”ãˆã„ãŸã ã„ãŸæ–¹ã«ã¯ã‚¹ãƒšã‚·ãƒ£ãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒã‚ã‚Šã¾ã™ï¼ï¼‰</a>
    </div>
  </div>

  <!-- ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
  <script>
    // ã‚¹ã‚¿ãƒ³ãƒ—å¸³ã®é–‹é–‰ï¼ˆè»½é‡ãªå†…è”µã‚¹ã‚¯ãƒªãƒ—ãƒˆã€‚æ—¢å­˜map.jsã«å½±éŸ¿ã—ã¾ã›ã‚“ï¼‰
    document.addEventListener('DOMContentLoaded', () => {
      const btn = document.getElementById('stampToggle');
      const body = document.getElementById('stampBody');
      const arrow = btn?.querySelector('.arrow');
      btn?.addEventListener('click', () => {
        const open = body.style.display === 'block';
        body.style.display = open ? 'none' : 'block';
        btn.setAttribute('aria-expanded', open ? 'false' : 'true');
        if (arrow) arrow.textContent = open ? 'â–¼' : 'â–²';
      });
    });
  </script>
  <script src="js/firebase.js" defer></script>
  <script src="js/map.js?v=20250926c" defer></script>
</body>
</html>
