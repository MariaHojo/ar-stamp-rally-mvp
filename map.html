<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ãƒãƒƒãƒ— | ARã‚¹ã‚¿ãƒ³ãƒ—ãƒ©ãƒªãƒ¼</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <link rel="stylesheet" href="css/style.css" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <style>
    :root{
      --accent:#005ABB;
      --bg:#fff;
      --text:#111;
      --muted:#666;
      --container: 980px;
      --radius: 16px;
    }
    html,body{background:var(--bg);color:var(--text);margin:0}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;line-height:1.6}

    .wrap{max-width:var(--container);margin:0 auto;padding:clamp(10px,3vw,14px)}
    a.link{color:var(--accent);text-decoration:none;font-weight:800}

    /* ======= ä¸Šéƒ¨ 1/6 ã®ã‚¨ãƒªã‚¢ï¼ˆåˆ©ç”¨è¦ç´„ / ã‚¹ã‚¿ãƒ³ãƒ—å¸³ / ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ï¼‰ ======= */
    .top-grid{
      display:grid;
      grid-template-columns: 1fr 2fr 1fr; /* å·¦1/4, ä¸­å¤®1/2, å³1/4 */
      gap:8px;
      align-items:center;
      margin-bottom:clamp(10px,3vw,14px);
    }
    @media (max-width:560px){
      .top-grid{grid-template-columns: 1fr 1fr 1fr}
    }
    .top-cell{display:flex;justify-content:center}
    .top-cell.left{justify-content:flex-start}
    .top-cell.right{justify-content:flex-end}

    .stampbook{
      width:100%;
      max-width:520px;
      background:#fff;border:1px solid #e9eef6;border-radius:14px;
      box-shadow:0 6px 24px rgba(0,0,0,.05);overflow:hidden;
    }
    .stampbook-header{
      width:100%; text-align:center; background:#fff; color:#111;
      appearance:none;border:0; padding:12px 14px; font-weight:900; letter-spacing:.02em;
      display:flex;align-items:center;justify-content:center; gap:10px; cursor:pointer;
    }
    .stampbook-header .arrow{color:#333}
    .stampbook-body{display:none;padding:10px 12px 12px;background:#fff}
    .stamp-count{font-size:13px;color:#333}

    .stamp-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
    .stamp-cell{
      border:1px solid #e3eaf6;border-radius:12px;padding:10px;min-height:72px;background:#fff;display:flex;align-items:center;gap:10px
    }
    .stamp-thumb{width:52px;height:52px;border-radius:10px;background:#eef5ff;flex:none;overflow:hidden;display:flex;align-items:center;justify-content:center}
    .stamp-thumb img{width:100%;height:100%;object-fit:cover}
    .stamp-meta{flex:1}
    .stamp-name{font-weight:800}
    .stamp-status{font-size:12px;color:#333}
    .stamp-cell.is-got{background:#f3fbf5;border-color:#b7e4c7}
    .stamp-cell.is-got .stamp-status{color:#2b8a3e;font-weight:800}
    .mark{font-weight:700}
    .complete-inline{margin:8px 0 0;text-align:center;display:none}
    .complete-inline a{color:var(--accent);text-decoration:none;font-weight:900}

    /* ======= ä¸­å¤®ï¼šåœ°å›³ ======= */
    .map-wrap{
      position:relative;width:100%;max-width:920px;margin:0 auto 14px;background:#fff;
      border-radius:var(--radius);box-shadow:0 10px 30px rgba(0,0,0,.05);overflow:hidden;
    }
    .map-img{display:block;width:100%;height:auto;object-fit:contain;background:#fff}
    .pin{
      position:absolute;width:40px;height:40px;transform:translate(-50%,-100%);
      display:inline-block;
    }
    .pin img{width:100%;height:100%;display:block}
    .pin:focus-visible{outline:3px solid rgba(0,90,187,.35);border-radius:50%}

    /* ======= ä¸‹ã‹ã‚‰1/4ï¼šèª¬æ˜ãƒ†ã‚­ã‚¹ãƒˆ ======= */
    .hint{
      max-width:920px;margin:10px auto;color:#333;background:#f6f7fb;border:1px solid #e9eef6;
      border-radius:12px;padding:10px 12px;font-size:14px
    }

    /* ======= ç”»é¢æœ€ä¸‹éƒ¨ï¼šã‚«ãƒ¡ãƒ©èµ·å‹• ======= */
    .footer-cta{
      position:sticky;bottom:0;left:0;right:0;z-index:5;background:linear-gradient(to top,#fff,#fff 70%,rgba(255,255,255,0));
      padding:10px 0 max(12px, env(safe-area-inset-bottom));
    }
    .btn{
      appearance:none;border:0;border-radius:12px;padding:14px 16px;font-weight:900;
      background:var(--accent);color:#fff;cursor:pointer;width:100%;box-shadow:0 10px 30px rgba(0,90,187,.25)
    }
    .btn-secondary{background:#e9eef6;color:#111;box-shadow:none}

    /* ======= ã‚«ãƒ¡ãƒ©ã®ã‚¹ãƒãƒƒãƒˆé¸æŠï¼šå†™çœŸã‚°ãƒªãƒƒãƒ‰ï¼ˆ2åˆ—Ã—3è¡Œï¼‰ ======= */
    #cameraChooserOverlay{
      position:fixed; inset:0; background:rgba(10,18,36,.55);
      opacity:0; pointer-events:none; transition:opacity .18s ease; z-index:9998;
    }
    #cameraChooserOverlay.is-open{ opacity:1; pointer-events:auto; }

    #cameraChooser{
      position:fixed; left:0; right:0; bottom:-100vh;
      background:#fff; border-radius:18px 18px 0 0; z-index:9999;
      box-shadow:0 -20px 50px rgba(0,0,0,.22); padding:12px 12px 16px;
      transition:transform .22s ease, bottom .22s ease;
      transform:translateY(12px);
    }
    #cameraChooser.is-open{ bottom:0; transform:translateY(0); }

    #cameraChooser .bar{ width:44px; height:5px; border-radius:999px; background:#d7def0; margin:6px auto 10px; }
    #cameraChooser .head{ display:flex; align-items:center; justify-content:space-between; padding:0 4px 8px; }
    #cameraChooser .title{ font-weight:900; font-size:clamp(16px,4.8vw,18px); color:#0a1d3a; }
    #cameraChooserClose{
      appearance:none; border:0; background:#eef3fb; color:#0a1d3a; font-weight:800;
      padding:8px 10px; border-radius:10px;
    }

    #cameraGrid{
      display:grid; grid-template-columns:repeat(2, 1fr); gap:12px; padding:4px;
      max-height:64vh; overflow:auto;
    }

    .spot-card{
      display:flex; flex-direction:column; align-items:stretch; gap:8px;
      background:#fff; border:1px solid #e6ecf8; border-radius:14px; padding:8px;
      box-shadow:0 6px 20px rgba(0,0,0,.06);
    }
    .spot-card.is-disabled{ opacity:.6; }

    .spot-thumb{
      position:relative; width:100%; aspect-ratio:1 / 1; overflow:hidden; border-radius:12px;
      background:#eef3fb;
    }
    .spot-thumb img{ width:100%; height:100%; object-fit:cover; display:block; }

    .badge{
      position:absolute; left:8px; top:8px; padding:4px 6px; border-radius:10px;
      font-size:12px; font-weight:800; color:#fff; background:#005ABB; box-shadow:0 6px 16px rgba(0,90,187,.25);
    }
    .badge.badge-gray{ background:#8b97b2; }

    .spot-name-wrap{ background:linear-gradient(180deg, rgba(255,255,255,0) 0%, rgba(245,248,255,.95) 28%, rgba(245,248,255,1) 100%); border-radius:10px; padding:6px 8px; }
    .spot-name{
      text-align:center; font-weight:900; letter-spacing:.02em;
      font-size:clamp(13px,4.4vw,15px); line-height:1.3;
      color:#ffffff;
      -webkit-text-stroke: 1.2px #0a1d3a;
      text-shadow: 0 1px 0 #0a1d3a, 0 -1px 0 #0a1d3a, 1px 0 0 #0a1d3a, -1px 0 0 #0a1d3a;
    }

    .spot-action{ margin-top:2px; }
    .spot-action button{
      appearance:none; border:0; border-radius:10px; padding:10px 10px;
      font-weight:900; width:100%; background:#005ABB; color:#fff; box-shadow:0 8px 22px rgba(0,90,187,.22);
    }
    .spot-card.is-disabled .spot-action button{ background:#b9c4da; color:#fff; }

    /* ======= å®Œèµ°ãƒ¢ãƒ¼ãƒ€ãƒ« ======= */
    .complete-overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);backdrop-filter:blur(2px);z-index:1000;display:none}
    .complete-overlay.is-open{display:block}
    .complete-modal{
      position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);
      width:min(92vw,560px);max-height:80vh;overflow:auto;background:#fff;border-radius:18px;
      box-shadow:0 20px 60px rgba(0,0,0,.35);padding:20px;z-index:1001;display:none
    }
    .complete-modal.is-open{display:block}
    .complete-title{margin:0 0 6px;font-size:20px}
    .complete-lead{margin:0 0 14px}
    .complete-row{display:flex;gap:8px;flex-wrap:wrap}

    /* å–å¾—/æœªå–å¾—ã®è¦‹ãŸç›® */
    .stamp-cell .stamp-thumb img { opacity:0; filter: grayscale(0.2); transition: opacity .2s }
    .stamp-cell.is-got .stamp-thumb img { opacity:1; filter:none }
  </style>
</head>
<body>
  <div id="pageRoot">
    <div class="wrap">
      <!-- ä¸Šéƒ¨ 1/6 ã‚¨ãƒªã‚¢ -->
      <div class="top-grid" aria-label="ä¸Šéƒ¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼">
        <div class="top-cell left">
          <a class="link" href="terms.html">åˆ©ç”¨è¦ç´„ãƒ»ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼</a>
        </div>

        <div class="top-cell">
          <!-- ã‚¹ã‚¿ãƒ³ãƒ—å¸³ï¼ˆæŠ˜ã‚Šç•³ã¿ï¼‰ -->
          <section class="stampbook" aria-label="ã‚¹ã‚¿ãƒ³ãƒ—å¸³">
            <button id="stampToggle" class="stampbook-header" type="button" aria-expanded="false" aria-controls="stampBody">
              <span class="arrow">â–¼</span><span>ã‚¹ã‚¿ãƒ³ãƒ—å¸³</span>
              <span class="stamp-count" id="stampCount" style="margin-left:8px">0/6</span>
            </button>

            <!-- ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆæ™‚ã«ã“ã®ä¸‹ã¸ complete.html ãƒªãƒ³ã‚¯ã‚’è¡¨ç¤ºï¼ˆJSã§åˆ¶å¾¡ï¼‰ -->
            <div id="completeInline" class="complete-inline">
              <a href="complete.html">ğŸ‰ ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆã‚’ç¢ºèªã™ã‚‹</a>
            </div>

            <div id="stampBody" class="stampbook-body">
              <div class="stamp-grid">
                <div class="stamp-cell" data-spot="spot1">
                  <div class="stamp-thumb"><img src="assets/images/stamp01.png" alt="ã‚¹ã‚¿ãƒ³ãƒ—1"></div>
                  <div class="stamp-meta"><div class="stamp-name">ã‚¹ãƒãƒƒãƒˆ1</div><div class="stamp-status"><span class="mark">æœªå–å¾—</span></div></div>
                </div>
                <div class="stamp-cell" data-spot="spot2">
                  <div class="stamp-thumb"><img src="assets/images/stamp02.png" alt="ã‚¹ã‚¿ãƒ³ãƒ—2"></div>
                  <div class="stamp-meta"><div class="stamp-name">ã‚¹ãƒãƒƒãƒˆ2</div><div class="stamp-status"><span class="mark">æœªå–å¾—</span></div></div>
                </div>
                <div class="stamp-cell" data-spot="spot3">
                  <div class="stamp-thumb"><img src="assets/images/stamp03.png" alt="ã‚¹ã‚¿ãƒ³ãƒ—3"></div>
                  <div class="stamp-meta"><div class="stamp-name">ã‚¹ãƒãƒƒãƒˆ3</div><div class="stamp-status"><span class="mark">æœªå–å¾—</span></div></div>
                </div>
                <div class="stamp-cell" data-spot="spot4">
                  <div class="stamp-thumb"><img src="assets/images/stamp01.png" alt="ã‚¹ã‚¿ãƒ³ãƒ—4"></div>
                  <div class="stamp-meta"><div class="stamp-name">ã‚¹ãƒãƒƒãƒˆ4</div><div class="stamp-status"><span class="mark">æœªå–å¾—</span></div></div>
                </div>
                <div class="stamp-cell" data-spot="spot5">
                  <div class="stamp-thumb"><img src="assets/images/stamp02.png" alt="ã‚¹ã‚¿ãƒ³ãƒ—5"></div>
                  <div class="stamp-meta"><div class="stamp-name">ã‚¹ãƒãƒƒãƒˆ5</div><div class="stamp-status"><span class="mark">æœªå–å¾—</span></div></div>
                </div>
                <div class="stamp-cell" data-spot="spot6">
                  <div class="stamp-thumb"><img src="assets/images/stamp03.png" alt="ã‚¹ã‚¿ãƒ³ãƒ—6"></div>
                  <div class="stamp-meta"><div class="stamp-name">ã‚¹ãƒãƒƒãƒˆ6</div><div class="stamp-status"><span class="mark">æœªå–å¾—</span></div></div>
                </div>
              </div>
            </div>
          </section>
        </div>

        <div class="top-cell right">
          <a class="link" href="tutorial.html">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</a>
        </div>
      </div>

      <!-- ä¸­å¤®ï¼šåœ°å›³ -->
      <div class="map-wrap" aria-label="ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹ãƒãƒƒãƒ—">
        <img class="map-img" src="assets/images/campasMap.png" alt="ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹åœ°å›³" />
        <!-- ãƒ”ãƒ³ï¼ˆãƒªãƒ³ã‚¯å…ˆã¯ç©ºã§OKã€‚å¾Œã§åœ°å›³ã‚¢ãƒ—ãƒªURLã‚’åŸ‹ã‚ã¦ãã ã•ã„ï¼‰ -->
        <a href="" class="pin" data-spot="spot1" style="left:22%;top:38%;" aria-label="ã‚¹ãƒãƒƒãƒˆ1"><img src="assets/images/map_pin.png" alt=""></a>
        <a href="" class="pin" data-spot="spot2" style="left:48%;top:28%;" aria-label="ã‚¹ãƒãƒƒãƒˆ2"><img src="assets/images/map_pin.png" alt=""></a>
        <a href="" class="pin" data-spot="spot3" style="left:72%;top:46%;" aria-label="ã‚¹ãƒãƒƒãƒˆ3"><img src="assets/images/map_pin.png" alt=""></a>
        <a href="" class="pin" data-spot="spot4" style="left:30%;top:62%;" aria-label="ã‚¹ãƒãƒƒãƒˆ4"><img src="assets/images/map_pin.png" alt=""></a>
        <a href="" class="pin" data-spot="spot5" style="left:55%;top:68%;" aria-label="ã‚¹ãƒãƒƒãƒˆ5"><img src="assets/images/map_pin.png" alt=""></a>
        <a href="" class="pin" data-spot="spot6" style="left:80%;top:60%;" aria-label="ã‚¹ãƒãƒƒãƒˆ6"><img src="assets/images/map_pin.png" alt=""></a>
      </div>

      <!-- ä¸‹ã‹ã‚‰1/4ï¼šèª¬æ˜ãƒ†ã‚­ã‚¹ãƒˆ -->
      <p class="hint">åœ°å›³ã®ãƒ”ãƒ³ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨ã‚¹ã‚¿ãƒ³ãƒ—é…ç½®å ´æ‰€ã¾ã§ã®æ¡ˆå†…ãŒå‡ºã¾ã™ï¼ï¼ˆåˆ¥ã‚¢ãƒ—ãƒªã¸ç§»å‹•ï¼‰</p>

      <!-- ç”»é¢æœ€ä¸‹éƒ¨ï¼šã‚«ãƒ¡ãƒ©èµ·å‹• -->
      <div class="footer-cta">
        <button id="cameraBtn" class="btn">ã‚«ãƒ¡ãƒ©èµ·å‹•</button>
      </div>
    </div>
  </div>

  <!-- ã‚¹ãƒãƒƒãƒˆé¸æŠï¼ˆå†™çœŸã‚°ãƒªãƒƒãƒ‰ã®ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆï¼‰ -->
  <div id="cameraChooserOverlay" aria-hidden="true"></div>
  <div id="cameraChooser" role="dialog" aria-modal="true" aria-labelledby="cameraChooserTitle">
    <div class="bar" aria-hidden="true"></div>
    <div class="head">
      <div id="cameraChooserTitle" class="title">ã‚¹ãƒãƒƒãƒˆã‚’é¸æŠ</div>
      <button id="cameraChooserClose" type="button">ã¨ã˜ã‚‹</button>
    </div>
    <div id="cameraGrid" aria-live="polite"><!-- JSã§6æšã‚’æŒ¿å…¥ --></div>
  </div>

  <!-- å®Œèµ°ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div id="completeOverlay" class="complete-overlay" aria-hidden="true"></div>
  <div id="completeModal" class="complete-modal" role="dialog" aria-modal="true" aria-labelledby="completeTitle" aria-describedby="completeLead">
    <h2 id="completeTitle" class="complete-title">ğŸ‰ ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆï¼</h2>
    <p id="completeLead" class="complete-lead">å…¨ã¦ã®ã‚¹ã‚¿ãƒ³ãƒ—ã‚’é›†ã‚ã¾ã—ãŸã€‚ã”å‚åŠ ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼</p>
    <div class="complete-row">
      <button id="closeComplete" class="btn btn-secondary" type="button">ãƒãƒƒãƒ—ã«æˆ»ã‚‹</button>
      <a id="toSurvey" class="btn" href="post-survey.html">ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã¸ï¼ˆãŠç­”ãˆã„ãŸã ã„ãŸæ–¹ã«ã¯ã‚¹ãƒšã‚·ãƒ£ãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒã‚ã‚Šã¾ã™ï¼ï¼‰</a>
    </div>
  </div>

  <!-- æŠ˜ã‚Šç•³ã¿ï¼ˆæœ€å°ï¼‰ -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const btn = document.getElementById('stampToggle');
      const body = document.getElementById('stampBody');
      const arrow = btn?.querySelector('.arrow');
      btn?.addEventListener('click', () => {
        const open = body.style.display === 'block';
        body.style.display = open ? 'none' : 'block';
        btn.setAttribute('aria-expanded', open ? 'false' : 'true');
        if (arrow) arrow.textContent = open ? 'â–¼' : 'â–²';
      });

      // withV: ç‰ˆæ•°ã‚¯ã‚¨ãƒªã‚’ä»˜ä¸ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥å›é¿ï¼‰
      if (!window.withV) {
        window.BUILD_V = window.BUILD_V || '20251003';
        window.withV = (url) => url + (url.includes('?') ? '&' : '?') + 'v=' + window.BUILD_V;
      }
    });
  </script>

  <script src="js/firebase.js" defer></script>
  <script src="js/map.js?v=20251003" defer></script>
</body>
</html>